{% extends "dashboard_base.html" %} 
{% load static %} 
{% block title %}Job Details | JobMate {% endblock %} 
{% block content %}

  <!-- HEADER -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <a href="{% url 'admin_dashboard:all_jobs' %}" class="text-decoration-none">
      <i class="bi bi-arrow-left me-2"></i>Back to Jobs
    </a>
    <a href="{% url 'admin_dashboard:edit_job' %}" class="btn btn-primary d-flex align-items-center gap-2">
      <i class="bi bi-pencil-square"></i> Edit Job
    </a>
  </div>

  <!-- JOB DETAILS -->
  <div>
    <strong class="fs-2 fw-bold">Job Details</strong>
      <p class="fs-6 text-muted"># JM-2025-0142 • Created: Jan 15, 2025</p> 
  </div>

  <!-- STATUS -->
  <div class="status-header">

    <!-- Status Badge -->
    <div class="d-flex align-items-center gap-3">
    <p class="m-0">Status:</p>
    <span class="badge rounded-pill bg-warning text-dark px-3 py-2">In Progress</span>
    <span class="badge rounded-pill bg-danger px-3 py-2">Priority: High</span>
    </div>

    <!-- Last Updated -->
    <div>
      <i class="bi bi-clock me-1"></i> Last Updated: Jan 18, 2025 at 2:30 PM
    </div>
  </div>

  <div class="row g-4">
    <!-- LEFT SECTION -->
    <div class="col-lg-8 d-flex flex-column gap-4">

      <!-- Job Info -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-info-circle-fill me-2"></i>Job Information
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Title</p>
              <p class="fw-semibold">Kitchen Sink Repair - Apartment 3B</p>
            </div>
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Category</p>
              <p><span class="badge bg-light text-primary border">Plumbing</span></p>
            </div>
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Property</p>
              <p class="fw-semibold">Riverside Apartments</p>
            </div>
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Unit</p>
              <p>Apartment 3B</p>
            </div>
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Requested By</p>
              <p>Sarah Johnson (Property Manager)</p>
            </div>
            <div class="col-md-6">
              <p class="mb-1 text-muted small">Assigned Engineer</p>
              <p>Mike Wilson</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Description -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-file-text-fill me-2"></i>Description
        </div>
        <div class="card-body">
          <p>
            The kitchen sink in apartment 3B has developed a persistent leak from the main faucet. 
            The tenant reported water dripping continuously, which is causing water damage to the cabinet below.
          </p>
          <p>
            Initial assessment suggests the issue may be with the faucet cartridge or O-ring seals.
            The leak appears to worsen when the hot water tap is used.
          </p>
          <p class="text-danger fw-semibold">
            Urgent repair needed to prevent further water damage and tenant inconvenience.
          </p>
        </div>
      </div>

      <!-- Job Updates -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-chat-dots-fill me-2"></i>Job Updates
        </div>
        <div class="card-body">
          <div class="mb-3">
            <div class="d-flex justify-content-between">
              <div class="fw-semibold">Mike Wilson <span class="badge bg-success ms-2">Engineer</span></div>
              <small class="text-muted">Jan 18, 2025 at 2:30 PM</small>
            </div>
            <p class="mt-1 mb-0">Arrived on site. Confirmed the leak is from the main faucet cartridge. Ordering replacement parts. Will return tomorrow to complete repair.</p>
          </div>
          <hr>
          <div class="mb-3">
            <div class="d-flex justify-content-between">
              <div class="fw-semibold">Sarah Johnson <span class="badge bg-secondary ms-2">Manager</span></div>
              <small class="text-muted">Jan 17, 2025 at 10:15 AM</small>
            </div>
            <p class="mt-1 mb-0">Job assigned to Mike Wilson. Tenant has been notified of scheduled visit.</p>
          </div>
          <hr>
          <div>
            <div class="d-flex justify-content-between">
              <div class="fw-semibold">Sarah Johnson <span class="badge bg-secondary ms-2">Manager</span></div>
              <small class="text-muted">Jan 15, 2025 at 4:45 PM</small>
            </div>
            <p class="mt-1 mb-0">Job created based on tenant maintenance request. Marked as high priority due to water damage risk.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT SECTION -->
    <div class="col-lg-4 d-flex flex-column gap-4">

      <!-- Quick Info -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-lightning-fill me-2"></i>Quick Info
        </div>
        <div class="card-body small">
          <div class="d-flex justify-content-between mb-2">
            <span>Status:</span>
            <span class="badge bg-warning text-dark">In Progress</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Priority:</span>
            <span class="badge bg-danger">High</span>
          </div>
          <hr>
          <div class="d-flex justify-content-between mb-2">
            <span>Due Date:</span><strong>Jan 20, 2025</strong>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Estimated Hrs:</span><strong>4</strong>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Estimated Cost:</span><strong class="text-primary">£85.00</strong>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Actual Hrs:</span><strong>24</strong>
          </div>
          <div class="d-flex justify-content-between">
            <span>Actual Cost:</span><strong class="text-success">£285.00</strong>
          </div>
        </div>
      </div>

      <!-- Contact Info -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-person-fill me-2"></i>Contact Information
        </div>
        <div class="card-body small">
          <p class="fw-semibold mb-1">Tenant</p>
          <p class="mb-2">Emily Davis<br>
          <a href="mailto:emily.davis@email.com">emily.davis@email.com</a><br>
          (555) 123-4567</p>

          <p class="fw-semibold mb-1">Property Manager</p>
          <p>Sarah Johnson<br>
          <a href="mailto:sarah.j@riverside.com">sarah.j@riverside.com</a><br>
          (555) 987-6543</p>
        </div>
      </div>

      <!-- Attachments -->
      <div class="card border-0 shadow-sm">
        <div class="card-header">
          <i class="bi bi-paperclip me-2"></i>Attachments
        </div>
        <div class="card-body small">
          <div class="d-flex align-items-center justify-content-between border rounded p-2 mb-2">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-file-earmark-image text-primary fs-5"></i>
              <span>sink_leak_photo.jpg</span>
            </div>
            <a href="#" class="text-decoration-none"><i class="bi bi-download"></i></a>
          </div>
          <div class="d-flex align-items-center justify-content-between border rounded p-2">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-file-earmark-pdf text-danger fs-5"></i>
              <span>maintenance_request.pdf</span>
            </div>
            <a href="#" class="text-decoration-none"><i class="bi bi-download"></i></a>
          </div>
        </div>
      </div>

      <!-- COMPLETE JOB BUTTON -->
      <button class="btn btn-primary w-100 py-2 mt-2 d-flex align-items-center justify-content-center gap-2">
        <i class="bi bi-check2-circle fs-5"></i> Complete Job
      </button>

    </div>
  </div>

{% endblock %}